

<h1>
    Users
</h1>


<table>
    <% for (let i in users) { %>
    <tr>
        <td>
            <a href="/users/<%= users[i].id %>" ><%= users[i].username %></a>
            <%= users[i].isAdmin ? "(admin)" : "" %>
        </td>
        <td>
            <% if (locals.loginUser?.isAdmin || locals.loginUser?.id === users[i].id) { %>
                <a href="/users/<%= users[i].id %>/edit" class="button">edit</a>
            <% } %>
        </td>
        <td>
            <% if (locals.loginUser?.isAdmin || locals.loginUser?.id === users[i].id) { %>
                <a href="/users/<%= users[i].id %>?_method=DELETE"
                   onClick="return confirm('Delete user: <%= users[i].username %>');"
                   class="button">delete</a>
            <% } %>
        </td>
    </tr>
    <%  } %>
</table>

<a href="/users/new" class="button">Create new user</a>